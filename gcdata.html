<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=9" >

<title>Getting and Cleaning Data - Course Project</title>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}

</style>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>




</head>

<body>
<h1>Getting and Cleaning Data - Course Project</h1>

<p>We will first read in the data from the test and training set.</p>

<pre><code class="r"># setwd( &#39;/Users/RaviM/Documents/courseradata/getcleandata&#39;)
test &lt;- read.table(&quot;UCI HAR Dataset/test/X_test.txt&quot;, sep = &quot;&quot;, header = FALSE)
train &lt;- read.table(&quot;UCI HAR Dataset/train/X_train.txt&quot;, sep = &quot;&quot;, header = FALSE)
</code></pre>

<p>We are now going to extract the columns that have either mean or std at the end of their description. From the dscussion forums it seemed like the TA&#39;s were suggesting that we could include the variables that have these terms in the middle, or not. But I had already made this choice. We then rbind these two data frames to construct one data set that has all the data.</p>

<pre><code class="r">extcols &lt;- c(1:6, 41:46, 81:86, 121:126, 161:166, 201:202, 214, 215, 227, 228, 
    240, 241, 253, 254)
extcols2 &lt;- c(266:271, 345:350, 424:429, 503, 504, 516, 517, 529, 530, 542, 
    543)
extract &lt;- c(extcols, extcols2)
testsampsubs &lt;- subset(test, select = extract)
trainsampsubs &lt;- subset(train, select = extract)
datasub &lt;- rbind(testsampsubs, trainsampsubs)
</code></pre>

<p>We are now going to read in the subjects column for the test and train data and rbind them into one column.</p>

<pre><code class="r">testsubj &lt;- read.table(&quot;UCI HAR Dataset/test/subject_test.txt&quot;, sep = &quot;&quot;, header = FALSE)
trainsubj &lt;- read.table(&quot;UCI HAR Dataset/train/subject_train.txt&quot;, sep = &quot;&quot;, 
    header = FALSE)
subjects &lt;- rbind(testsubj, trainsubj)
colnames(subjects) &lt;- c(&quot;subject&quot;)
</code></pre>

<p>We are now going to read in the Activity column for the test and train data and rbind them into one column.</p>

<pre><code class="r">testactiv &lt;- read.table(&quot;UCI HAR Dataset/test/y_test.txt&quot;, sep = &quot;&quot;, header = FALSE)
trainactiv &lt;- read.table(&quot;UCI HAR Dataset/train/y_train.txt&quot;, sep = &quot;&quot;, header = FALSE)
activity &lt;- rbind(testactiv, trainactiv)
colnames(activity) &lt;- c(&quot;Activity&quot;)
</code></pre>

<p>We now create a single  data set with the subjects and activity column added to the data 
set.</p>

<pre><code class="r">dataset &lt;- cbind(subjects, activity, datasub)
</code></pre>

<p>We are now going to add the column names to the data set. For this we first read in the names of all the columns from the features.txt file. This is read in as a data frame with two columns, so we first need to extract the second column that has all the names. We then take its transpose to make this a row consisting of all the names of the columns in the original data set. Finally we extract the names of the columns we are subsetting in this data set. Finally we add these names as names of the columns in the data set.</p>

<pre><code class="r">names &lt;- read.table(&quot;UCI HAR Dataset/features.txt&quot;, sep = &quot;&quot;, header = FALSE)
names &lt;- subset(names, select = c(2))
names &lt;- t(names)
namessub &lt;- subset(names, select = extract)
colnames(dataset) &lt;- cbind(colnames(subjects), colnames(activity), namessub)
</code></pre>

<p>We now want to relabel the activity data so that it is more descriptive. So we want to replace &ldquo;1&rdquo; by &ldquo;Walking&rdquo; etc.</p>

<pre><code class="r">dataset$Activity &lt;- as.numeric(dataset$Activity)
dataset$Activity &lt;- factor(dataset$Activity)
levels(dataset$Activity)[1] &lt;- &quot;Walking&quot;
levels(dataset$Activity)[2] &lt;- &quot;Walking_upstairs&quot;
levels(dataset$Activity)[3] &lt;- &quot;Walking_downstairs&quot;
levels(dataset$Activity)[4] &lt;- &quot;Sitting&quot;
levels(dataset$Activity)[5] &lt;- &quot;Standing&quot;
levels(dataset$Activity)[6] &lt;- &quot;Laying&quot;
</code></pre>

<p>At this point we should have a data set that has only the relevant columns,  the column names should be more descriptive, and the Activity data should also be descriptive. Let us check.</p>

<pre><code class="r">head(dataset)
</code></pre>

<pre><code>##   subject Activity tBodyAcc-mean()-X tBodyAcc-mean()-Y tBodyAcc-mean()-Z
## 1       2 Standing            0.2572          -0.02329          -0.01465
## 2       2 Standing            0.2860          -0.01316          -0.11908
## 3       2 Standing            0.2755          -0.02605          -0.11815
## 4       2 Standing            0.2703          -0.03261          -0.11752
## 5       2 Standing            0.2748          -0.02785          -0.12953
## 6       2 Standing            0.2792          -0.01862          -0.11390
##   tBodyAcc-std()-X tBodyAcc-std()-Y tBodyAcc-std()-Z tGravityAcc-mean()-X
## 1          -0.9384          -0.9201          -0.6677               0.9365
## 2          -0.9754          -0.9675          -0.9450               0.9274
## 3          -0.9938          -0.9699          -0.9627               0.9299
## 4          -0.9947          -0.9733          -0.9671               0.9289
## 5          -0.9939          -0.9674          -0.9783               0.9266
## 6          -0.9945          -0.9704          -0.9653               0.9257
##   tGravityAcc-mean()-Y tGravityAcc-mean()-Z tGravityAcc-std()-X
## 1              -0.2827               0.1153             -0.9254
## 2              -0.2892               0.1526             -0.9891
## 3              -0.2875               0.1461             -0.9959
## 4              -0.2934               0.1429             -0.9931
## 5              -0.3030               0.1383             -0.9956
## 6              -0.3089               0.1306             -0.9988
##   tGravityAcc-std()-Y tGravityAcc-std()-Z tBodyAccJerk-mean()-X
## 1             -0.9370             -0.5643               0.07205
## 2             -0.9839             -0.9648               0.07018
## 3             -0.9883             -0.9816               0.06937
## 4             -0.9704             -0.9916               0.07485
## 5             -0.9710             -0.9681               0.07838
## 6             -0.9907             -0.9712               0.07598
##   tBodyAccJerk-mean()-Y tBodyAccJerk-mean()-Z tBodyAccJerk-std()-X
## 1              0.045754             -0.106043              -0.9067
## 2             -0.017876             -0.001721              -0.9492
## 3             -0.004908             -0.013673              -0.9911
## 4              0.032274              0.012141              -0.9908
## 5              0.022277              0.002748              -0.9921
## 6              0.017519              0.008208              -0.9938
##   tBodyAccJerk-std()-Y tBodyAccJerk-std()-Z tBodyGyro-mean()-X
## 1              -0.9380              -0.9359           0.119976
## 2              -0.9727              -0.9777          -0.001552
## 3              -0.9714              -0.9729          -0.048213
## 4              -0.9729              -0.9759          -0.056642
## 5              -0.9787              -0.9866          -0.059992
## 6              -0.9791              -0.9876          -0.039698
##   tBodyGyro-mean()-Y tBodyGyro-mean()-Z tBodyGyro-std()-X
## 1           -0.09179            0.18963           -0.8831
## 2           -0.18729            0.18071           -0.9256
## 3           -0.16628            0.15417           -0.9730
## 4           -0.12602            0.11834           -0.9678
## 5           -0.08472            0.07866           -0.9747
## 6           -0.06683            0.07055           -0.9799
##   tBodyGyro-std()-Y tBodyGyro-std()-Z tBodyGyroJerk-mean()-X
## 1           -0.8162           -0.9409               -0.20490
## 2           -0.9296           -0.9676               -0.13867
## 3           -0.9785           -0.9756               -0.09781
## 4           -0.9751           -0.9632               -0.10223
## 5           -0.9780           -0.9676               -0.09185
## 6           -0.9765           -0.9635               -0.09274
##   tBodyGyroJerk-mean()-Y tBodyGyroJerk-mean()-Z tBodyGyroJerk-std()-X
## 1               -0.17449               -0.09339               -0.9012
## 2               -0.02580               -0.07142               -0.9623
## 3               -0.03421               -0.06003               -0.9842
## 4               -0.04471               -0.05344               -0.9842
## 5               -0.02901               -0.06124               -0.9885
## 6               -0.03214               -0.07258               -0.9894
##   tBodyGyroJerk-std()-Y tBodyGyroJerk-std()-Z tBodyAccMag-mean()
## 1               -0.9109               -0.9393            -0.8669
## 2               -0.9563               -0.9813            -0.9690
## 3               -0.9879               -0.9762            -0.9762
## 4               -0.9896               -0.9807            -0.9743
## 5               -0.9919               -0.9820            -0.9758
## 6               -0.9895               -0.9778            -0.9817
##   tBodyAccMag-std() tGravityAccMag-mean() tGravityAccMag-std()
## 1           -0.7052               -0.8669              -0.7052
## 2           -0.9539               -0.9690              -0.9539
## 3           -0.9791               -0.9762              -0.9791
## 4           -0.9770               -0.9743              -0.9770
## 5           -0.9769               -0.9758              -0.9769
## 6           -0.9777               -0.9817              -0.9777
##   tBodyAccJerkMag-mean() tBodyAccJerkMag-std() tBodyGyroMag-mean()
## 1                -0.9298               -0.8960             -0.7955
## 2                -0.9737               -0.9410             -0.8984
## 3                -0.9816               -0.9714             -0.9392
## 4                -0.9827               -0.9748             -0.9472
## 5                -0.9869               -0.9889             -0.9574
## 6                -0.9873               -0.9920             -0.9697
##   tBodyGyroMag-std() tBodyGyroJerkMag-mean() tBodyGyroJerkMag-std()
## 1            -0.7621                 -0.9252                -0.8943
## 2            -0.9109                 -0.9734                -0.9441
## 3            -0.9718                 -0.9867                -0.9844
## 4            -0.9704                 -0.9888                -0.9856
## 5            -0.9695                 -0.9901                -0.9904
## 6            -0.9733                 -0.9878                -0.9890
##   fBodyAcc-mean()-X fBodyAcc-mean()-Y fBodyAcc-mean()-Z fBodyAcc-std()-X
## 1           -0.9185           -0.9182           -0.7891          -0.9483
## 2           -0.9609           -0.9644           -0.9567          -0.9843
## 3           -0.9919           -0.9650           -0.9669          -0.9948
## 4           -0.9930           -0.9683           -0.9669          -0.9956
## 5           -0.9924           -0.9692           -0.9797          -0.9945
## 6           -0.9938           -0.9707           -0.9756          -0.9946
##   fBodyAcc-std()-Y fBodyAcc-std()-Z fBodyAccJerk-mean()-X
## 1          -0.9251          -0.6363               -0.8996
## 2          -0.9702          -0.9419               -0.9435
## 3          -0.9737          -0.9623               -0.9910
## 4          -0.9769          -0.9690               -0.9905
## 5          -0.9675          -0.9782               -0.9915
## 6          -0.9710          -0.9614               -0.9938
##   fBodyAccJerk-mean()-Y fBodyAccJerk-mean()-Z fBodyAccJerk-std()-X
## 1               -0.9375               -0.9236              -0.9244
## 2               -0.9692               -0.9734              -0.9616
## 3               -0.9734               -0.9717              -0.9919
## 4               -0.9725               -0.9703              -0.9920
## 5               -0.9798               -0.9835              -0.9936
## 6               -0.9790               -0.9861              -0.9945
##   fBodyAccJerk-std()-Y fBodyAccJerk-std()-Z fBodyGyro-mean()-X
## 1              -0.9432              -0.9479            -0.8236
## 2              -0.9800              -0.9808            -0.9225
## 3              -0.9710              -0.9723            -0.9728
## 4              -0.9754              -0.9806            -0.9715
## 5              -0.9787              -0.9885            -0.9764
## 6              -0.9808              -0.9876            -0.9797
##   fBodyGyro-mean()-Y fBodyGyro-mean()-Z fBodyGyro-std()-X
## 1            -0.8079            -0.9179           -0.9033
## 2            -0.9265            -0.9682           -0.9271
## 3            -0.9808            -0.9721           -0.9732
## 4            -0.9813            -0.9667           -0.9672
## 5            -0.9804            -0.9688           -0.9744
## 6            -0.9805            -0.9602           -0.9800
##   fBodyGyro-std()-Y fBodyGyro-std()-Z fBodyAccMag-mean() fBodyAccMag-std()
## 1           -0.8227           -0.9562            -0.7909           -0.7111
## 2           -0.9320           -0.9701            -0.9541           -0.9597
## 3           -0.9772           -0.9791            -0.9756           -0.9838
## 4           -0.9719           -0.9653            -0.9734           -0.9821
## 5           -0.9766           -0.9700            -0.9777           -0.9788
## 6           -0.9742           -0.9678            -0.9780           -0.9799
##   fBodyBodyAccJerkMag-mean() fBodyBodyAccJerkMag-std()
## 1                    -0.8951                   -0.8964
## 2                    -0.9454                   -0.9342
## 3                    -0.9711                   -0.9703
## 4                    -0.9717                   -0.9785
## 5                    -0.9875                   -0.9897
## 6                    -0.9913                   -0.9917
##   fBodyBodyGyroMag-mean() fBodyBodyGyroMag-std()
## 1                 -0.7706                -0.7971
## 2                 -0.9245                -0.9168
## 3                 -0.9752                -0.9740
## 4                 -0.9763                -0.9712
## 5                 -0.9770                -0.9696
## 6                 -0.9770                -0.9751
##   fBodyBodyGyroJerkMag-mean() fBodyBodyGyroJerkMag-std()
## 1                     -0.8902                    -0.9073
## 2                     -0.9520                    -0.9382
## 3                     -0.9857                    -0.9833
## 4                     -0.9856                    -0.9858
## 5                     -0.9905                    -0.9906
## 6                     -0.9887                    -0.9898
</code></pre>

<p>Now we want to calculate the mean of every column corresponding to the dat (from columns 3 to 68 in our data set), according to subject and activity. So we first creat two lists for subjects and activity, and then we aggregate the data set between columns 3 and 68, by subject and activity.</p>

<pre><code class="r">bysubj &lt;- dataset$subject
byactivity &lt;- dataset$Activity
tidydata &lt;- aggregate(dataset[, 3:68], by = list(bysubj, byactivity), FUN = &quot;mean&quot;)
</code></pre>

<p>We finally rename the first and second column of this dat frame to be &ldquo;Subject&rdquo; and &ldquo;Activity&rdquo; respectively.</p>

<pre><code class="r">colnames(tidydata)[1] &lt;- &quot;Subject&quot;
colnames(tidydata)[2] &lt;- &quot;Activity&quot;
</code></pre>

<p>Now we are going to write this data as a text file.</p>

<pre><code class="r">write.table(tidydata, &quot;tidydata.txt&quot;, sep = &quot; &quot;, col.names = F, row.names = F)
</code></pre>

<p>Now we want to read this back and see if it works.</p>

<pre><code class="r">testtidy &lt;- read.table(&quot;tidydata.txt&quot;, sep = &quot;&quot;, header = F)
head(testtidy)
</code></pre>

<pre><code>##   V1      V2     V3       V4      V5      V6       V7      V8     V9
## 1  1 Walking 0.2773 -0.01738 -0.1111 -0.2837  0.11446 -0.2600 0.9352
## 2  2 Walking 0.2764 -0.01859 -0.1055 -0.4236 -0.07809 -0.4253 0.9130
## 3  3 Walking 0.2756 -0.01718 -0.1127 -0.3604 -0.06991 -0.3874 0.9365
## 4  4 Walking 0.2786 -0.01484 -0.1114 -0.4408 -0.07883 -0.5863 0.9640
## 5  5 Walking 0.2778 -0.01729 -0.1077 -0.2941  0.07675 -0.4570 0.9726
## 6  6 Walking 0.2837 -0.01690 -0.1103 -0.2965  0.16421 -0.5043 0.9581
##        V10       V11     V12     V13     V14     V15       V16        V17
## 1 -0.28217 -0.068103 -0.9766 -0.9713 -0.9477 0.07404  0.028272 -4.168e-03
## 2 -0.34661  0.084727 -0.9727 -0.9721 -0.9721 0.06181  0.018249  7.895e-03
## 3 -0.26199 -0.138108 -0.9778 -0.9624 -0.9521 0.08147  0.010059 -5.623e-03
## 4 -0.08585  0.127764 -0.9838 -0.9680 -0.9630 0.07835  0.002956 -7.677e-04
## 5 -0.10044  0.002476 -0.9793 -0.9616 -0.9646 0.08459 -0.016319  8.322e-05
## 6 -0.21469  0.033189 -0.9778 -0.9642 -0.9572 0.06996 -0.016483 -7.389e-03
##       V18       V19     V20      V21      V22     V23     V24      V25
## 1 -0.1136  0.067003 -0.5027 -0.04183 -0.06953 0.08494 -0.4735 -0.05461
## 2 -0.2775 -0.016602 -0.5861 -0.05303 -0.04824 0.08283 -0.5616 -0.53845
## 3 -0.2687 -0.044962 -0.5295 -0.02564 -0.07792 0.08135 -0.5719 -0.56379
## 4 -0.2970 -0.221165 -0.7514 -0.03180 -0.07269 0.08057 -0.5009 -0.66539
## 5 -0.3029 -0.091040 -0.6129 -0.04889 -0.06901 0.08154 -0.4909 -0.50462
## 6 -0.1328  0.008089 -0.5758 -0.02551 -0.07445 0.08388 -0.4460 -0.33170
##       V26      V27      V28      V29     V30     V31     V32     V33
## 1 -0.3443 -0.09000 -0.03984 -0.04613 -0.2074 -0.3045 -0.4043 -0.1370
## 2 -0.4811 -0.08188 -0.05383 -0.05149 -0.3895 -0.6341 -0.4355 -0.2904
## 3 -0.4767 -0.09524 -0.03879 -0.05036 -0.3859 -0.6391 -0.5367 -0.2547
## 4 -0.6626 -0.11532 -0.03935 -0.05512 -0.4923 -0.8074 -0.6405 -0.3121
## 5 -0.3187 -0.08884 -0.04496 -0.04827 -0.3577 -0.5714 -0.1577 -0.1583
## 6 -0.3831 -0.08789 -0.03623 -0.05396 -0.1826 -0.4164 -0.1667 -0.1668
##       V34     V35     V36     V37      V38     V39     V40     V41     V42
## 1 -0.2197 -0.1370 -0.2197 -0.1414 -0.07447 -0.1610 -0.1870 -0.2987 -0.3253
## 2 -0.4225 -0.2904 -0.4225 -0.2814 -0.16415 -0.4465 -0.5530 -0.5479 -0.5578
## 3 -0.3284 -0.2547 -0.3284 -0.2800 -0.13992 -0.4664 -0.5615 -0.5661 -0.5674
## 4 -0.5277 -0.3121 -0.5277 -0.3667 -0.31692 -0.4978 -0.5531 -0.6813 -0.7301
## 5 -0.3772 -0.1583 -0.3772 -0.2883 -0.28224 -0.3559 -0.4922 -0.4445 -0.4892
## 6 -0.2667 -0.1668 -0.2667 -0.1951 -0.07060 -0.2812 -0.3656 -0.3213 -0.3647
##       V43      V44     V45     V46      V47     V48     V49      V50
## 1 -0.2028  0.08971 -0.3316 -0.3191  0.05604 -0.2797 -0.1705 -0.03523
## 2 -0.3460 -0.02190 -0.4538 -0.4577 -0.16922 -0.4552 -0.3046 -0.07876
## 3 -0.3166 -0.08130 -0.4124 -0.3793 -0.12403 -0.4230 -0.3047 -0.14051
## 4 -0.4267 -0.14940 -0.6310 -0.4472 -0.10180 -0.5942 -0.3589 -0.27955
## 5 -0.2878  0.00946 -0.4903 -0.2975  0.04260 -0.4831 -0.3450 -0.18106
## 6 -0.1879  0.14078 -0.4985 -0.3452  0.10170 -0.5505 -0.1509 -0.07537
##       V51     V52       V53     V54     V55     V56     V57     V58
## 1 -0.4690 -0.1336  0.106740 -0.5347 -0.3390 -0.1031 -0.2559 -0.5167
## 2 -0.5550 -0.3143 -0.015333 -0.6159 -0.4297 -0.5548 -0.3967 -0.6041
## 3 -0.5141 -0.2966 -0.005615 -0.5435 -0.4378 -0.5615 -0.4181 -0.6151
## 4 -0.7290 -0.2973 -0.209900 -0.7724 -0.3734 -0.6885 -0.6014 -0.5426
## 5 -0.5905 -0.3214 -0.054521 -0.6334 -0.3727 -0.5140 -0.2131 -0.5294
## 6 -0.5414 -0.1927  0.031445 -0.6086 -0.2397 -0.3414 -0.2036 -0.5153
##        V59     V60     V61     V62      V63      V64     V65     V66
## 1 -0.03351 -0.4366 -0.1286 -0.3980 -0.05712 -0.10349 -0.1993 -0.3210
## 2 -0.53305 -0.5599 -0.3243 -0.5771 -0.16906 -0.16409 -0.5307 -0.6518
## 3 -0.56889 -0.5459 -0.2900 -0.4564 -0.18676 -0.08985 -0.5698 -0.6326
## 4 -0.65466 -0.7165 -0.4508 -0.6512 -0.31859 -0.32046 -0.6093 -0.5939
## 5 -0.50268 -0.4204 -0.3050 -0.5196 -0.26948 -0.30569 -0.4843 -0.5897
## 6 -0.33201 -0.5122 -0.2014 -0.4217 -0.05540 -0.09650 -0.3297 -0.5106
##       V67     V68
## 1 -0.3193 -0.3816
## 2 -0.5832 -0.5581
## 3 -0.6078 -0.5491
## 4 -0.7243 -0.7578
## 5 -0.5481 -0.4557
## 6 -0.3665 -0.4081
</code></pre>

<p>Finally we create a file that has all the column names.</p>

<pre><code class="r">cnames &lt;- colnames(tidydata)
write.table(cnames, &quot;column_names.txt&quot;, sep = &quot; &quot;, col.names = F, quote = F)
</code></pre>

</body>

</html>

